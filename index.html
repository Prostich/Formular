<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Anfrageformular mit Multi-Konfigurator ‚Äì Modernes Design</title>
  <style>
    /* Farbpalette (Beispiel):
       - Hintergrund: #F2F2F2
       - Container: #FFFFFF
       - Haupttext: #0D0D0D
       - Akzentfarbe: #8C1818 (Buttons, √úberschriften)
       - Button-Hover: #A12020 */
       
    /* Allgemeine Basiseinstellungen */
    body {
      font-family: 'Helvetica Light', 'Helvetica', sans-serif;
      background-color: #F2F2F2;
      margin: 0;
      padding: 0;
      font-size: 14px;
      color: #0D0D0D;
    }
    
    /* √úberschriften */
    h2, h3 {
      color: #8C1818;
      margin-top: 0;
    }
    
    /* Wrapper: 2 Spalten (Formular links, Konfigurator rechts) */
    .wrapper {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 10px;
    }
    
    /* Formular-Spalte */
    .form-container {
      flex: 1;
      max-width: 600px;
    }
    form {
      background: #FFFFFF;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
    }
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .form-grid-full {
      grid-column: span 2;
    }
/* Rahmen um die Inputs */
.size-group {
  border: 1px solid #CCC;
  padding: 10px;
  border-radius: 4px;
  margin-top: 0;          /* kein extra Abstand oberhalb */
}

/* Einheitlicher Abstand unter jedem Label */
form label {
  margin-bottom: 4px;     /* genau wie bei deinen Inputs */
}
    
    /* Neuer Container f√ºr Text und Schriftfarbe (zweispaltig) */
    .text-color-container {
      display: flex;
      gap: 10px;
    }
    .text-color-container > div {
      flex: 1;
    }
    .text-color-container input[type="color"] {
      border: 2px solid #ccc;
      width: 100%;
      padding: 4px;
      box-sizing: border-box;
    }
    
    /* Formular-Elemente */
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-family: inherit;
      color: #0D0D0D;
    }
    label {
      font-weight: 600;
      display: block;
      color: #0D0D0D;
    }
    
    /* Buttons */
    .btn-absenden, .btn-addconfig {
      background: #8C1818;
      color: #FFFFFF;
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    .btn-absenden:hover, .btn-addconfig:hover {
      background: #A12020;
    }
    
    .ds-text {
      font-size: 12px;
      color: #333;
    }
    .checkbox-wrapper {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    
    /* Mengenanpassung */
    .quantity-adjuster {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 5px;
    }
    .quantity-adjuster button {
      width: auto;
      padding: 0 12px;
      background: #F2F2F2;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    
    @media (max-width: 600px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
      .form-grid-full {
        grid-column: span 1;
      }
      .wrapper {
        flex-direction: column;
      }
      .text-color-container {
        flex-direction: column;
      }
    }
    
    /* Konfigurator-Spalte */
    .configurator-container {
      flex: 1;
      max-width: 600px;
      background: #FFFFFF;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
      padding: 15px;
      display: none;
    }
    .configurator-container h2 {
      margin-top: 0;
      margin-bottom: 15px;
      text-align: center;
      font-size: 16px;
    }
    
    /* Umschalt-Buttons */
    .toggle-buttons {
      text-align: center;
      margin-bottom: 15px;
    }
    .toggle-buttons button {
      background: #F2F2F2;
      padding: 8px 16px;
      margin: 3px;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      color: #0D0D0D;
    }
    .toggle-buttons button:hover {
      background: #e0e0e0;
    }
    
    /* Shirt-View */
    .shirt-view {
      position: relative;
      width: 400px;
      margin: 0 auto;
      overflow: visible;
    }
    .shirt-view img.base-image {
      display: block;
      margin: 0 auto;
      width: 100%;
      height: auto;
    }
    
    /* Overlays */
    .overlay-design {
      position: absolute;
      cursor: move;
      transform: translate(0px, 0px) scale(1);
    }
    .image-overlay {
      max-width: 150px;
      z-index: 5;
    }
    .text-overlay {
      max-width: 300px;
      white-space: normal;
      overflow-wrap: break-word;
      z-index: 5;
      font-weight: bold;
      color: #0D0D0D;
      background: transparent;
    }
    
    .scale-control {
      text-align: center;
      margin-top: 10px;
      display: none;
      font-size: 14px;
    }
    
    /* Bereich f√ºr hinzugef√ºgte Konfigurationen */
    .added-configurations {
      border: 1px solid #ccc;
      padding: 8px;
      margin-top: 10px;
      border-radius: 4px;
      max-height: 200px;
      overflow-y: auto;
      font-size: 13px;
      color: #0D0D0D;
    }
    .config-item {
      border-bottom: 1px solid #ddd;
      margin-bottom: 8px;
      padding-bottom: 8px;
    }
    .config-item button {
      background: #ccc;
      border: none;
      padding: 4px 8px;
      margin-top: 5px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }
    .config-item button:hover {
      background: #8C1818;
      color: #FFF;
    }
    
    /* Delete-Button */
    .delete-button {
      position: absolute;
      top: 2px;
      right: 2px;
      background: rgba(255, 0, 0, 0.7);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      text-align: center;
      line-height: 20px;
      cursor: pointer;
      z-index: 10;
      font-weight: bold;
    }
    /* Stil f√ºr Farbauswahl-Felder */
input[type="color"] {
  appearance: none;
  -webkit-appearance: none;
  width: 100%;
  height: 33px;
  padding: 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  box-sizing: border-box;
  transition: border-color 0.3s, box-shadow 0.3s;
}

/* F√ºr WebKit-Browser (Chrome, Safari) */
input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 13px;
  box-sizing: border-box;
}

input[type="color"]::-webkit-color-swatch {
  border: 1px solid #aaa; /* <-- HIER: d√ºnner grauer Rand */
  border-radius: 4px;
  height: 100%;
}

/* F√ºr Firefox */
input[type="color"]::-moz-color-swatch {
  border: 1px solid #aaa; /* <-- Auch hier f√ºr Firefox */
  border-radius: 4px;
  height: 100%;
  margin: 0;
}

/* Sch√∂ner Hover-Effekt */
input[type="color"]:hover {
  border-color: #8C1818;
  box-shadow: 0 0 5px rgba(140, 24, 24, 0.4);
}
        .hint-popup {
  position: relative;
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 12px;
  opacity: 0;
  transition: opacity 0.5s ease;
  pointer-events: none;
  z-index: 20;
  white-space: nowrap;
}
.hint-popup.show {
  opacity: 1;
}
    .separator-line {
  border: none;
  border-top: 1px solid #ccc;
  margin: 20px 0;
}
    .preview-label {
  text-align: center;
  color: #888; /* heller Grauton */
  font-size: 14px;
  margin: 10px 0;
}
    .toggle-buttons button.active {
  background-color: #8C1818;
  color: white;
}
    .shirt-view {
  border: 2px dashed #ccc;
  padding: 10px;
  border-radius: 8px;
}
/* Hover (Maus dar√ºber) */
input:hover, select:hover, textarea:hover {
  border-color: #8C1818; /* Akzentfarbe (rot) */
  box-shadow: 0 0 4px rgba(140, 24, 24, 0.3);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

/* Fokus (geklickt/aktiv) */
input:focus, select:focus, textarea:focus {
  border-color: #1E90FF; /* kr√§ftiges Blau */
  box-shadow: 0 0 5px rgba(30, 144, 255, 0.5);
  outline: none;
}
    .custom-file-upload {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 4px;
}

.file-label {
  background-color: #8C1818;
  color: white;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: background-color 0.2s ease;
}

.file-label:hover {
  background-color: #A12020;
}

.custom-file-upload input[type="file"] {
  display: none;
}

.file-name {
  font-size: 13px;
  color: #666;
  font-style: italic;
}
  </style>
</head>
<body>

<div class="wrapper">
  <!-- Anfrageformular -->
  <div class="form-container">
    <form 
  action="https://formsubmit.co/prostich@outlook.de" 
  method="POST" 
  enctype="multipart/form-data"
>
      <!-- Empfohlene Zusatzfelder -->
<input type="hidden" name="_subject" value="üõí Neue Produkt-Konfiguration erhalten!">
<input type="hidden" name="_next" value="https://deine-domain.de/danke.html">
<input type="hidden" name="_captcha" value="false"> <!-- Optional: Captcha deaktivieren -->
<input type="hidden" name="_template" value="table"> <!-- sch√∂ne tabellarische E-Mail -->
      
      <h2>Produkt-Konfiguration</h2>
      <div class="form-grid">
        <div><label>Produktart*</label>
          <select name="Produktart" id="produktartSelect" required>
            <option value="">Bitte w√§hlen</option>
            <option value="T-Shirt">T-Shirt</option>
            <option value="Hoodie">Hoodie</option>
            <option value="Sweatshirt">Sweatshirt</option>
            <option value="Poloshirt">Poloshirt</option>
            <option value="Sch√ºrze">Sch√ºrze</option>
          </select>
        </div>
        <div><label>Farbe*</label><select name="Farbe" required><option value="">Bitte w√§hlen</option></select></div>

        <div><label>Front Text</label><input type="text" name="Text_Vorderseite"></div>
        <div><label>Front Textfarbe</label><input type="color" name="Schriftfarbe_Vorderseite" value="#000000"></div>
        <div><label>Back Text</label><input type="text" name="Text_Rueckseite"></div>
        <div><label>Back Textfarbe</label><input type="color" name="Schriftfarbe_Rueckseite" value="#000000"></div>
        <div><label>Front Design</label><input type="file" name="Design_Vorderseite" accept=".jpg,.jpeg,.png,.pdf,.ai,.eps"></div>
        <div><label>Back Design</label><input type="file" name="Design_Rueckseite" accept=".jpg,.jpeg,.png,.pdf,.ai,.eps"></div>

        <div class="form-grid-full">
          <label>Anzahl &amp; Gr√∂√üen</label>
        </div>

        <div class="form-grid-full size-group">
          <div class="form-grid">
            <div><label>S</label><select id="size_S" name="size_S"></select></div>
            <div><label>M</label><select id="size_M" name="size_M"></select></div>
            <div><label>L</label><select id="size_L" name="size_L"></select></div>
            <div><label>XL</label><select id="size_XL" name="size_XL"></select></div>
            <div><label>2XL</label><select id="size_2XL" name="size_2XL"></select></div>
            <div><label>3XL</label><select id="size_3XL" name="size_3XL"></select></div>
          </div>
        </div>
      </div>

      <h2></h2>
      <div class="form-grid">
        <div><label>Vorname*</label><input type="text" name="Vorname" required></div>
        <div><label>Nachname*</label><input type="text" name="Nachname" required></div>
        <div><label>E-Mail*</label><input type="email" name="Email" required></div>
        <div><label>Telefon</label><input type="text" name="Telefon"></div>
        <div><label>Stra√üe / Nr.*</label><input type="text" name="Strasse" required></div>
        <div><label>PLZ / Ort*</label><input type="text" name="PLZ_Ort" required></div>

        <div class="form-grid-full"><label>Anliegen</label><input type="text" name="Anliegen"></div>
        <div class="form-grid-full"><label>Ihre Nachricht</label><textarea name="Nachricht" rows="4"></textarea></div>

        <div class="form-grid-full ds-text">
          <div class="checkbox-wrapper">
            <span>Ich habe die <a href="/datenschutz" target="_blank">Datenschutzerkl√§rung</a> gelesen und akzeptiert.*</span>
            <input type="checkbox" required>
          </div>
        </div>
        <div class="form-grid-full" style="text-align: center;"><button type="submit" class="btn-absenden">Absenden</button></div>
      </div>

      <!-- Dynamische Hidden-Inputs -->
      <div id="configurationsInputs"></div>
      <input type="hidden" name="KonfigurationenVorschau" id="konfigurationenVorschau">
      <input type="hidden" name="_next" value="https://deine-webseite.de/danke">
    </form>
  </div>
  
  <!-- Konfigurator -->
  <div class="configurator-container" id="configurator">
    <h2>Konfigurator</h2>
    <p style="text-align:center;">Gestalte dein Kleidungsst√ºck und f√ºge es der Bestellung hinzu.</p>
    <hr class="separator-line">
    <!-- Umschalt-Buttons -->
    <div class="toggle-buttons">
      <button id="frontViewBtn">Vorderseite</button>
      <button id="backViewBtn">R√ºckseite</button>
    </div>
    <!-- Vorderansicht -->
<div class="shirt-view" id="frontView">
  <img id="frontBase" class="base-image" src="..." alt="Vorderseite">
</div>
<div class="shirt-view" id="backView" style="display:none;">
  <img id="backBase" class="base-image" src="..." alt="R√ºckseite">
</div>

<!-- Vorschautext unter den Ansichten -->
<div class="preview-label" id="previewText">Vorschau deines Produkts (Vorderseite)</div>
    
    <!-- Skalierungsregler -->
    <div class="scale-control" id="scaleControl">
      <label for="scaleSlider">Skalierung</label><br>
      <input type="range" id="scaleSlider" min="0.5" max="1.2" step="0.01" value="1">
    </div>
    <!-- Button zum Hinzuf√ºgen/Updaten -->
    <div style="text-align:center; margin-bottom: 25px;">
  <button type="button" id="addConfigBtn" class="btn-addconfig">Produkt hinzuf√ºgen</button>
</div>
    <!-- Bereich f√ºr hinzugef√ºgte Konfigurationen -->
<div class="added-configurations" id="addedConfigurations">
  <h3>Hinzugef√ºgte Konfigurationen:</h3>
  <p class="placeholder-text" style="font-style: italic; color: #888;">Noch keine Konfigurationen hinzugef√ºgt.</p>
      <!-- Hier werden dynamisch die Eintr√§ge eingef√ºgt -->
    </div>
  </div>
</div>

<script>
  function createOverlayControls(overlay, data, isText = false) {
  const wrapper = document.createElement("div");
  wrapper.className = "overlay-wrapper";
  wrapper.style.position = "absolute";
  wrapper.style.left = "0";
  wrapper.style.top = "0";
  wrapper.style.zIndex = "10";

  const infoBox = document.createElement("div");
  infoBox.className = "overlay-info";
  infoBox.style.position = "absolute";
  infoBox.style.top = "-30px";
  infoBox.style.left = "50%";
  infoBox.style.transform = "translateX(-50%)";
  infoBox.style.background = "white";
  infoBox.style.border = "1px solid #ccc";
  infoBox.style.borderRadius = "6px";
  infoBox.style.padding = "4px 8px";
  infoBox.style.fontSize = "12px";
  infoBox.style.whiteSpace = "nowrap";

  const btnRotate = document.createElement("button");
  const btnMove = document.createElement("button");
  const btnScale = document.createElement("button");
  const btnDelete = document.createElement("button");

  btnRotate.textContent = "‚Üª";
  btnMove.textContent = "‚ò∞";
  btnScale.textContent = "‚Üò";
  btnDelete.textContent = "üóë";

  [btnRotate, btnMove, btnScale, btnDelete].forEach(btn => {
    btn.style.position = "absolute";
    btn.style.width = "22px";
    btn.style.height = "22px";
    btn.style.background = "white";
    btn.style.border = "1px solid #ccc";
    btn.style.borderRadius = "4px";
    btn.style.cursor = "pointer";
    btn.style.fontSize = "14px";
  });

  btnRotate.style.top = "-25px";
  btnRotate.style.left = "-25px";

  btnMove.style.top = "-25px";
  btnMove.style.right = "-25px";

  btnScale.style.bottom = "-25px";
  btnScale.style.right = "-25px";

  btnDelete.style.bottom = "-25px";
  btnDelete.style.left = "-25px";

  let currentRotation = 0;
  btnRotate.addEventListener("click", () => {
    currentRotation = (currentRotation + 15) % 360;
    overlay.style.transform = `translate(${data.x}px, ${data.y}px) scale(${data.scale}) rotate(${currentRotation}deg)`;
  });

  btnScale.addEventListener("click", () => {
    const newScale = prompt("Skalierung (z.‚ÄØB. 1 = 100%)", data.scale);
    if (newScale && !isNaN(newScale)) {
      data.scale = parseFloat(newScale);
      overlay.style.transform = `translate(${data.x}px, ${data.y}px) scale(${data.scale}) rotate(${currentRotation}deg)`;
      updateOverlayInfo(infoBox, overlay, data);
    }
  });

  btnDelete.addEventListener("click", () => {
    wrapper.remove();
    overlay.remove();
  });

  wrapper.appendChild(overlay);
  wrapper.appendChild(infoBox);
  wrapper.appendChild(btnRotate);
  wrapper.appendChild(btnMove);
  wrapper.appendChild(btnScale);
  wrapper.appendChild(btnDelete);

  return wrapper;
}

function updateOverlayInfo(infoBox, overlay, data, dpi = 300) {
  const pxWidth = overlay.naturalWidth || overlay.offsetWidth;
  const pxHeight = overlay.naturalHeight || overlay.offsetHeight;
  const cmWidth = ((pxWidth * data.scale) / dpi) * 2.54;
  const cmHeight = ((pxHeight * data.scale) / dpi) * 2.54;
  const dpiValue = Math.round((pxWidth + pxHeight) / ((cmWidth + cmHeight) / 2.54));
  infoBox.textContent = `B: ${cmWidth.toFixed(1)} cm x H: ${cmHeight.toFixed(1)} cm DPI: ${dpiValue}`;
}

  
  /* --- JavaScript-Logik: Drag & Drop, Konfigurationen verwalten, Formular bearbeiten --- */
  
  // Globale Variablen f√ºr aktives Overlay (zum Skalieren)
  let activeOverlay = null, activeOverlayData = null;

  // JS zum Bef√ºllen der Mengen-Auswahlfelder von 0 bis 300
  window.addEventListener('DOMContentLoaded', () => {
    ['S','M','L','XL','2XL','3XL'].forEach(size => {
      const select = document.getElementById(`size_${size}`);
      for (let i = 0; i <= 300; i++) {
        const opt = document.createElement('option');
        opt.value = i;
        opt.text = i;
        select.appendChild(opt);
      }
    });
  });

  // Overlay zentrieren
  function centerOverlay(overlay, container, dataObj) {
    setTimeout(() => {
      const containerRect = container.getBoundingClientRect();
      const overlayRect = overlay.getBoundingClientRect();
      const centerX = (containerRect.width - overlayRect.width) / 2;
      const fixedTop = -270;
      dataObj.x = centerX;
      dataObj.y = fixedTop;
      overlay.style.transform = `translate(${centerX}px, ${fixedTop}px) scale(${dataObj.scale})`;
    }, 100);
  }

  // Variablen f√ºr Konfigurationen
  const colorsByProduct = {
    "T-Shirt": ["Schwarz", "Wei√ü", "Anthrazit", "Pacific Grey", "Navy", "Royal", "Diva Blue", "Steinblau", "Himmelblau", "Forest Green", "Khaki", "Kelly Gr√ºn", "Rot", "Sorbet", "Orange", "Urban purple", "Braun purple", "Gelb", "Rosa", "Sand", "Weinrot"],
    "Hoodie": ["Schwarz", "Wei√ü", "Beige", "Sport Grey", "Heather Grey", "T√ºrkis", "Rosa", "Rot", "Royal"],
    "Sweatshirt": ["Schwarz", "Wei√ü", "Dark Heather", "Navy", "Grau", "Stone Blue", "Sand"],
    "Poloshirt": ["Wei√ü", "Schwarz", "Royal", "Anthrazit", "Rosa", "Himmelblau", "Khaki", "Navy", "Feuerrot", "Orange"],
    "Sch√ºrze": ["Wei√ü", "Schwarz", "Navy", "Beige", "Rot"]
  };

  let configurationsArray = [];
  let editModeIndex = null;

  const imagesConfig = {
    "T-Shirt": { front: 'https://i.imgur.com/RMifsog.png', back: 'https://i.imgur.com/UFz3S4Q.png' },
    "Hoodie": { front: 'https://i.imgur.com/UM2Smwb.png', back: 'https://i.imgur.com/qyXDB2Z.png' }
  };

  const colorImages = {
    "T-Shirt": {
      "Schwarz": { front: 'https://i.imgur.com/WhZfQbG.png', back: 'https://i.imgur.com/b9XXtMd.png' },
      "Wei√ü": { front: 'https://i.imgur.com/iQ8BuZQ.png', back: 'https://i.imgur.com/SFyodqz.png' },
      "Anthrazit": { front: 'https://i.imgur.com/X6hKknJ.png', back: 'https://i.imgur.com/Xsq83fW.png' },
      "Pacific Grey": { front: 'https://i.imgur.com/nFOW1Fu.png', back: 'https://i.imgur.com/qupjkDS.png' },
      "Navy": { front: 'https://i.imgur.com/Y4n0z06.png', back: 'https://i.imgur.com/GstWEvQ.png' },
      "Royal": { front: 'https://i.imgur.com/H4zkoUg.png', back: 'https://i.imgur.com/E5CYmDg.png' },
      "Diva Blue": { front: 'https://i.imgur.com/LuTh9EF.png', back: 'https://i.imgur.com/iG7FmRS.png' },
      "Steinblau": { front: 'https://i.imgur.com/C3nYxMh.png', back: 'https://i.imgur.com/XntKMdb.png' },
      "Himmelblau": { front: 'https://i.imgur.com/b51gcLc.png', back: 'https://i.imgur.com/2YzPzhz.png' },
      "Forest Green": { front: 'https://i.imgur.com/ix1qVCO.png', back: 'https://i.imgur.com/QFZlVOu.png' },
      "Khaki": { front: 'https://i.imgur.com/YImEhhR.png', back: 'https://i.imgur.com/Giepot7.png' },
      "Kelly Gr√ºn": { front: 'https://i.imgur.com/9djCBrm.png', back: 'https://i.imgur.com/lhSrFPE.png' },
      "Rot": { front: 'https://i.imgur.com/MvuJii7.png', back: 'https://i.imgur.com/lLeii8i.png' },
      "Sorbet": { front: 'https://i.imgur.com/pg2Y5b6.png', back: 'https://i.imgur.com/IY8nnWx.png' },
      "Orange": { front: 'https://i.imgur.com/cBzgnwg.png', back: 'https://i.imgur.com/kievhRO.png' },
      "Urban purple": { front: 'https://i.imgur.com/ywjPDcC.png', back: 'https://i.imgur.com/6Xz6qwP.png' },
      "Braun purple": { front: 'https://i.imgur.com/OP70exq.png', back: 'https://i.imgur.com/z4ykZBM.png' },
      "Gelb": { front: 'https://i.imgur.com/vDQ3fQO.png', back: 'https://i.imgur.com/ShcGaVC.png' },
      "Rosa": { front: 'https://i.imgur.com/YiupyW1.png', back: 'https://i.imgur.com/eSDXWpB.png' },
      "Sand": { front: 'https://i.imgur.com/gk4048g.png', back: 'https://i.imgur.com/7sZO9cB.png' },
      "Weinrot": { front: 'https://i.imgur.com/Ykv1Sln.png', back: 'https://i.imgur.com/6Pyy6q8.png' }
    },
    "Hoodie": {
      "Schwarz": { front: 'https://i.imgur.com/DxAyMKF.png', back: 'https://i.imgur.com/NuiRtRk.png' },
      "Wei√ü": { front: 'https://i.imgur.com/bZhemul.png', back: 'https://i.imgur.com/8eBZvd9.png' },
      "Beige": { front: 'https://i.imgur.com/QTTOqX2.png', back: 'https://i.imgur.com/A0D692l.png' },
      "Sport Grey": { front: 'https://i.imgur.com/fyFBLge.png', back: 'https://i.imgur.com/QVoD0Uc.png' },
      "Heather Grey": { front: 'https://i.imgur.com/G7HGkjI.png', back: 'https://i.imgur.com/oYzXtFN.png' },
      "T√ºrkis": { front: 'https://i.imgur.com/JzWGymF.png', back: 'https://i.imgur.com/cX2uoET.png' },
      "Rosa": { front: 'https://i.imgur.com/FQgyMja.png', back: 'https://i.imgur.com/M2KJsAC.png' },
      "Rot": { front: 'https://i.imgur.com/8s3U2RB.png', back: 'https://i.imgur.com/y65XOVQ.png' },
      "Royal": { front: 'https://i.imgur.com/Z3YUtb3.png', back: 'https://i.imgur.com/tXLI2ul.png' }
    },
    "Sweatshirt": {
      "Schwarz": { front: 'https://i.imgur.com/7JHYQUg.png', back: 'https://i.imgur.com/OCjwybD.png' },
      "Wei√ü": { front: 'https://i.imgur.com/nJBAbi9.png', back: 'https://i.imgur.com/Cv6FX2a.png' },
      "Dark Heather": { front: 'https://i.imgur.com/pGfqq5B.png', back: 'https://i.imgur.com/PD9x0U3.png' },
      "Navy": { front: 'https://i.imgur.com/KPS8Ibo.png', back: 'https://i.imgur.com/Tx2l3QQ.png' },
      "Grau": { front: 'https://i.imgur.com/FQuYuDg.png', back: 'https://i.imgur.com/JWJglwN.png' },
      "Stone Blue": { front: 'https://i.imgur.com/5BnuMOM.png', back: 'https://i.imgur.com/weEzcrP.png' },
      "Sand": { front: 'https://i.imgur.com/JynXaFW.png', back: 'https://i.imgur.com/XCzLhp7.png' }
    },
    "Poloshirt": {
      "Wei√ü": { front: 'https://i.imgur.com/XezvEkr.png', back: 'https://i.imgur.com/49HTApi.png' },
      "Schwarz": { front: 'https://i.imgur.com/zy0BKgz.png', back: 'https://i.imgur.com/PU3upjO.png' },
      "Royal": { front: 'https://i.imgur.com/Fyz0ZRK.png', back: 'https://i.imgur.com/iuksTz6.png' },
      "Anthrazit": { front: 'https://i.imgur.com/w4BgrKi.png', back: 'https://i.imgur.com/STDNUK8.png' },
      "Rosa": { front: 'https://i.imgur.com/Z1MvhJY.png', back: 'https://i.imgur.com/U9lNrBA.png' },
      "Himmelblau": { front: 'https://i.imgur.com/KmiV6iI.png', back: 'https://i.imgur.com/owHiQUb.png' },
      "Khaki": { front: 'https://i.imgur.com/pN0ZS6Q.png', back: 'https://i.imgur.com/Eby9E7t.png' },
      "Navy": { front: 'https://i.imgur.com/5wwURsG.png', back: 'https://i.imgur.com/IVJFeX9.png' },
      "Feuerrot": { front: 'https://i.imgur.com/ZfXkBCt.png', back: 'https://i.imgur.com/SdLhWJI.png' },
      "Orange": { front: 'https://i.imgur.com/MkaB6ph.png', back: 'https://i.imgur.com/HGVr2uq.png' }
    },
    "Sch√ºrze": {
      "Wei√ü": { front: 'https://i.imgur.com/6HKvrWb.png' },
      "Schwarz": { front: 'https://i.imgur.com/2OLfT3u.png' },
      "Navy": { front: 'https://i.imgur.com/tbebiDS.png' },
      "Beige": { front: 'https://i.imgur.com/UxE45X9.png' },
      "Rot": { front: 'https://i.imgur.com/m5lblZY.png' }
    }
  };

  // Overlay-Daten f√ºr Bilder und Texte
  let frontOverlay = null, frontOverlayData = { x: 0, y: 0, scale: 1 };
  let backOverlay = null, backOverlayData = { x: 0, y: 0, scale: 1 };
  let frontTextOverlay = null, frontTextOverlayData = { x: 0, y: 0, scale: 1 };
  let backTextOverlay = null, backTextOverlayData = { x: 0, y: 0, scale: 1 };

  // Delete-Button Variablen (optional)
  let frontDeleteButton = null;
  let backDeleteButton = null;

  // Funktion: Overlay transformieren
  function updateOverlayTransform(el, data) {
    el.style.transform = `translate(${data.x}px, ${data.y}px) scale(${data.scale})`;
  }

  // Funktion: Drag & Drop (und Klick f√ºr Skalierungsregler)
  function makeDraggable(el, data) {
    let isDragging = false, startX, startY;
    el.addEventListener('mousedown', function(e) {
      isDragging = true;
      startX = e.clientX - data.x;
      startY = e.clientY - data.y;
      e.preventDefault();
    });
    document.addEventListener('mousemove', function(e) {
      if (isDragging) {
        data.x = e.clientX - startX;
        data.y = e.clientY - startY;
        updateOverlayTransform(el, data);
        e.preventDefault();
      }
    });
    document.addEventListener('mouseup', function(e) {
      if (isDragging) {
        isDragging = false;
        e.preventDefault();
      }
    });
    el.addEventListener('click', function(e) {
      activeOverlay = el;
      activeOverlayData = data;
      document.getElementById('scaleControl').style.display = 'block';
      document.getElementById('scaleSlider').value = data.scale;
      e.stopPropagation();
    });
  }

function clearConfigurator() {
  // 1) Produkt & Farbe zur√ºcksetzen
  const produktartSelect = document.getElementById('produktartSelect');
  const colorSelect = document.querySelector('select[name="Farbe"]');
  produktartSelect.value = "T-Shirt";
  produktartSelect.dispatchEvent(new Event('change'));
  colorSelect.value = "Schwarz";
  colorSelect.dispatchEvent(new Event('change'));

  // 2) Texte & Farb-Picker zur√ºcksetzen
  document.querySelector('input[name="Text_Vorderseite"]').value = "";
  document.querySelector('input[name="Text_Rueckseite"]').value = "";
  document.querySelector('input[name="Schriftfarbe_Vorderseite"]').value = "#000000";
  document.querySelector('input[name="Schriftfarbe_Rueckseite"]').value = "#000000";

  // 3) Designs-/Text-Overlays entfernen
  if (frontOverlay)     { frontOverlay.remove();     frontOverlay = null; }
  if (backOverlay)      { backOverlay.remove();      backOverlay = null; }
  if (frontTextOverlay) { frontTextOverlay.remove(); frontTextOverlay = null; }
  if (backTextOverlay)  { backTextOverlay.remove();  backTextOverlay = null; }

  // 4) Overlay-Daten & Steuerung zur√ºcksetzen
  frontOverlayData     = { x:0, y:0, scale:1 };
  backOverlayData      = { x:0, y:0, scale:1 };
  frontTextOverlayData = { x:0, y:0, scale:1 };
  backTextOverlayData  = { x:0, y:0, scale:1 };
  activeOverlay        = null;
  activeOverlayData    = null;
  document.getElementById('scaleControl').style.display = 'none';
  document.getElementById('scaleSlider').value      = 1;

  // 5) File-Inputs zur√ºcksetzen
  document.querySelector('input[name="Design_Vorderseite"]').value = "";
  document.querySelector('input[name="Design_Rueckseite"]').value = "";

  // 6) Gr√∂√üen-Dropdowns auf 0 zur√ºcksetzen
  ['S','M','L','XL','2XL','3XL'].forEach(size => {
    const sel = document.getElementById('size_' + size);
    if (sel) sel.value = "0";
  });

  // 7) Button-Text wiederherstellen
  const addConfigBtn = document.getElementById('addConfigBtn');
  if (addConfigBtn) addConfigBtn.textContent = "Produkt hinzuf√ºgen";
}

  document.addEventListener('DOMContentLoaded', function() {
    const produktartSelect = document.getElementById('produktartSelect');
    const colorSelect = document.querySelector('select[name="Farbe"]');
    const configurator = document.getElementById('configurator');
    const frontBase = document.getElementById('frontBase');
    const backBase = document.getElementById('backBase');
    const frontViewBtn = document.getElementById('frontViewBtn');
    const backViewBtn = document.getElementById('backViewBtn');
    const frontView = document.getElementById('frontView');
    const backView = document.getElementById('backView');
    const scaleControl = document.getElementById('scaleControl');
    const scaleSlider = document.getElementById('scaleSlider');
    const frontTextInput = document.querySelector('input[name="Text_Vorderseite"]');
    const backTextInput = document.querySelector('input[name="Text_Rueckseite"]');
    const frontFontColorInput = document.querySelector('input[name="Schriftfarbe_Vorderseite"]');
    const backFontColorInput = document.querySelector('input[name="Schriftfarbe_Rueckseite"]');
    const addedConfigurations = document.getElementById('addedConfigurations');
    const configurationsInputs = document.getElementById('configurationsInputs');
    const addConfigBtn = document.getElementById('addConfigBtn');

    function centerOverlay(overlay, container, dataObj) {
      setTimeout(() => {
        const containerRect = container.getBoundingClientRect();
        const overlayRect = overlay.getBoundingClientRect();
        const centerX = (containerRect.width - overlayRect.width) / 2;
        const fixedTop = -270;
        dataObj.x = centerX;
        dataObj.y = fixedTop;
        overlay.style.transform = `translate(${centerX}px, ${fixedTop}px) scale(${dataObj.scale})`;
      }, 100);
    }

    // Produktart-Wechsel
    produktartSelect.addEventListener('change', function() {
      const selectedProduct = produktartSelect.value;
      const prevColor = colorSelect.value;
      let newOptions = '<option value="">Bitte w√§hlen</option>';
      if (colorsByProduct[selectedProduct]) {
        colorsByProduct[selectedProduct].forEach(color => {
          newOptions += `<option value="${color}">${color}</option>`;
        });
      }
      colorSelect.innerHTML = newOptions;
      if (prevColor && colorsByProduct[selectedProduct].includes(prevColor)) {
        colorSelect.value = prevColor;
      }
      if (selectedProduct === 'Sch√ºrze') {
        configurator.style.display = 'block';
        const selColor = colorSelect.value;
        if (selColor && colorImages[selectedProduct] && colorImages[selectedProduct][selColor]) {
          frontBase.src = colorImages[selectedProduct][selColor].front;
        } else {
          frontBase.src = "";
        }
        backBase.src = "";
        frontView.style.display = "block";
        backView.style.display = "none";
        backViewBtn.style.display = "none";
      } else if (selectedProduct === 'T-Shirt' || selectedProduct === 'Hoodie' ||
                 selectedProduct === 'Sweatshirt' || selectedProduct === 'Poloshirt') {
        configurator.style.display = 'block';
        const selColor = colorSelect.value;
        if (selColor && colorImages[selectedProduct] && colorImages[selectedProduct][selColor]) {
          frontBase.src = colorImages[selectedProduct][selColor].front;
          backBase.src = colorImages[selectedProduct][selColor].back;
        } else if (imagesConfig[selectedProduct]) {
          frontBase.src = imagesConfig[selectedProduct].front;
          backBase.src = imagesConfig[selectedProduct].back;
        }
        frontView.style.display = "block";
        backView.style.display = "none";
        backViewBtn.style.display = "inline-block";
      } else {
        configurator.style.display = 'none';
      }
    });

    // Farbe-Wechsel
    colorSelect.addEventListener('change', function() {
      const selColor = colorSelect.value;
      const selectedProduct = produktartSelect.value;
      if (selectedProduct === 'Sch√ºrze') {
        if (selColor && colorImages[selectedProduct] && colorImages[selectedProduct][selColor]) {
          frontBase.src = colorImages[selectedProduct][selColor].front;
        } else {
          frontBase.src = "";
        }
        backBase.src = "";
        frontView.style.display = "block";
        backView.style.display = "none";
      } else if (selectedProduct && selColor && colorImages[selectedProduct] && colorImages[selectedProduct][selColor]) {
        frontBase.src = colorImages[selectedProduct][selColor].front;
        backBase.src = colorImages[selectedProduct][selColor].back;
        frontView.style.display = "block";
        backView.style.display = "none";
      } else if (selectedProduct && imagesConfig[selectedProduct]) {
        frontBase.src = imagesConfig[selectedProduct].front;
        backBase.src = imagesConfig[selectedProduct].back;
        frontView.style.display = "block";
        backView.style.display = "none";
      }
    });

    // Umschalten der Ansichten
    frontViewBtn.addEventListener('click', function() {
      frontView.style.display = 'block';
      backView.style.display = 'none';
    });
    backViewBtn.addEventListener('click', function() {
      frontView.style.display = 'none';
      backView.style.display = 'block';
    });

    // Skalierungsregler
    scaleSlider.addEventListener('input', function() {
      const newScale = parseFloat(this.value);
      if (activeOverlay && activeOverlayData) {
        activeOverlayData.scale = newScale;
        updateOverlayTransform(activeOverlay, activeOverlayData);
      } else {
        if (frontView.style.display !== 'none') {
          if (frontOverlay) {
            frontOverlayData.scale = newScale;
            updateOverlayTransform(frontOverlay, frontOverlayData);
          } else if (frontTextOverlay) {
            frontTextOverlayData.scale = newScale;
            updateOverlayTransform(frontTextOverlay, frontTextOverlayData);
          }
        } else {
          if (backOverlay) {
            backOverlayData.scale = newScale;
            updateOverlayTransform(backOverlay, backOverlayData);
          } else if (backTextOverlay) {
            backTextOverlayData.scale = newScale;
            updateOverlayTransform(backTextOverlay, backTextOverlayData);
          }
        }
      }
    });

    // Front Design Upload
    const frontDesignInput = document.querySelector('input[name="Design_Vorderseite"]');
    frontDesignInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          if (!frontOverlay) {
            frontOverlay = document.createElement('img');
            frontOverlay.className = 'overlay-design image-overlay';
            frontOverlayData = { x: 0, y: 0, scale: 1 };
            frontOverlay.style.transform = `translate(${frontOverlayData.x}px, ${frontOverlayData.y}px) scale(${frontOverlayData.scale})`;
            frontView.appendChild(frontOverlay);
            frontOverlay.onload = function() {
              centerOverlay(frontOverlay, frontView, frontOverlayData);
            };
            makeDraggable(frontOverlay, frontOverlayData);
            showHintFixedPosition();
          }
          frontOverlay.src = evt.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // R√ºck Design Upload
    const backDesignInput = document.querySelector('input[name="Design_Rueckseite"]');
    backDesignInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          if (!backOverlay) {
            backOverlay = document.createElement('img');
            backOverlay.className = 'overlay-design image-overlay';
            backOverlayData = { x: 0, y: 0, scale: 1 };
            backOverlay.style.transform = `translate(${backOverlayData.x}px, ${backOverlayData.y}px) scale(${backOverlayData.scale})`;
            backView.appendChild(backOverlay);
            backOverlay.onload = function() {
              centerOverlay(backOverlay, backView, backOverlayData);
            };
            makeDraggable(backOverlay, backOverlayData);
          }
          backOverlay.src = evt.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // Text-Overlay f√ºr Vorderseite
    frontTextInput.addEventListener('input', function(e) {
      const text = e.target.value;
      if (text.trim() !== "") {
        if (!frontTextOverlay) {
          frontTextOverlay = document.createElement('div');
          frontTextOverlay.className = 'overlay-design text-overlay';
          frontTextOverlay.style.fontSize = '24px';
          frontTextOverlay.style.fontWeight = 'bold';
          frontTextOverlay.style.color = frontFontColorInput.value;
          frontTextOverlay.style.background = 'transparent';
          frontTextOverlay.textContent = text;
          frontTextOverlayData = { x: 0, y: 0, scale: 1 };
          frontView.appendChild(frontTextOverlay);
          centerOverlay(frontTextOverlay, frontView, frontTextOverlayData);
          makeDraggable(frontTextOverlay, frontTextOverlayData);
          showHintFixedPosition();
        } else {
          frontTextOverlay.textContent = text;
        }
      } else {
        if (frontTextOverlay) {
          frontTextOverlay.parentElement.removeChild(frontTextOverlay);
          frontTextOverlay = null;
        }
      }
    });

    // Text-Overlay f√ºr R√ºckseite
    backTextInput.addEventListener('input', function(e) {
      const text = e.target.value;
      if (text.trim() !== "") {
        if (!backTextOverlay) {
          backTextOverlay = document.createElement('div');
          backTextOverlay.className = 'overlay-design text-overlay';
          backTextOverlay.style.fontSize = '24px';
          backTextOverlay.style.fontWeight = 'bold';
          backTextOverlay.style.color = backFontColorInput.value;
          backTextOverlay.style.background = 'transparent';
          backTextOverlay.textContent = text;
          backTextOverlayData = { x: 0, y: 0, scale: 1 };
          backView.appendChild(backTextOverlay);
          centerOverlay(backTextOverlay, backView, backTextOverlayData);
          makeDraggable(backTextOverlay, backTextOverlayData);
        } else {
          backTextOverlay.textContent = text;
        }
      } else {
        if (backTextOverlay) {
          backTextOverlay.parentElement.removeChild(backTextOverlay);
          backTextOverlay = null;
        }
      }
    });

    // Schriftfarbe aktualisieren
    frontFontColorInput.addEventListener('input', function(e) {
      if (frontTextOverlay) {
        frontTextOverlay.style.color = e.target.value;
      }
    });
    backFontColorInput.addEventListener('input', function(e) {
      if (backTextOverlay) {
        backTextOverlay.style.color = e.target.value;
      }
    });

    /* Konfigurationen verwalten */
    function renderConfigurations() {
      addedConfigurations.innerHTML = "<h3>Hinzugef√ºgte Konfigurationen:</h3>";
      configurationsInputs.innerHTML = "";
      configurationsArray.forEach((config, index) => {
        let sizesStr = "";
        if (config.sizeQuantities) {
          sizesStr = Object.entries(config.sizeQuantities)
            .map(([s, q]) => s + ': ' + q)
            .join(', ');
        }
        let configDiv = document.createElement('div');
        configDiv.className = 'config-item';
        configDiv.innerHTML = `<strong>${config.product}</strong> (${config.color})<br>
                               Gr√∂√üen & Anzahl: ${sizesStr}<br>
                               Ansicht: ${config.activeView}<br>
                               Text (Vorderseite): ${config.textFront ? config.textFront : 'Kein Text'}<br>
                               Text (R√ºckseite): ${config.textBack ? config.textBack : 'Kein Text'}<br>
                               <button onclick="editConfig(${index})">Bearbeiten</button>
                               <button onclick="deleteConfig(${index})" style="background: red; color: white;">L√∂schen</button>`;
        addedConfigurations.appendChild(configDiv);
        let hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = 'configurations[]';
        hiddenInput.value = JSON.stringify(config);
        configurationsInputs.appendChild(hiddenInput);
      });
    }
    
    // Konfiguration l√∂schen
    window.deleteConfig = function(index) {
      configurationsArray.splice(index, 1);
      renderConfigurations();
    };
    
    // Editieren: Daten aus dem gespeicherten Konfigurationseintrag in das Formular laden
    window.editConfig = function(index) {
      editModeIndex = index;
      let config = configurationsArray[index];
      // Schriftfarben in Formularfelder √ºbernehmen
      frontFontColorInput.value = config.fontColorFront || "#000000";
      backFontColorInput.value = config.fontColorBack || "#000000";
      
      produktartSelect.value = config.product;
if (config.sizeQuantities) {
  ['S','M','L','XL','2XL','3XL'].forEach(size => {
    const select = document.getElementById('size_' + size);
    if (select) {
      select.value = config.sizeQuantities[size] !== undefined ? config.sizeQuantities[size] : "0";
    }
  });
}
produktartSelect.dispatchEvent(new Event('change'));

setTimeout(() => {
  colorSelect.value = config.color;
  colorSelect.dispatchEvent(new Event('change'));
}, 50); // Warten, bis die Optionen geladen wurden
      
      // Die Texte in die Eingabefelder √ºbernehmen
      frontTextInput.value = config.textFront || "";
      backTextInput.value = config.textBack || "";
      
      // Designs wiederherstellen
      if (config.designFront) {
        if (frontOverlay) { frontOverlay.parentElement.removeChild(frontOverlay); frontOverlay = null; }
        frontOverlay = document.createElement('img');
        frontOverlay.className = 'overlay-design image-overlay';
        frontOverlayData = { ...config.designFrontData };
        frontOverlay.style.transform = `translate(${frontOverlayData.x}px, ${frontOverlayData.y}px) scale(${frontOverlayData.scale})`;
        frontOverlay.src = config.designFront;
        frontView.appendChild(frontOverlay);
        makeDraggable(frontOverlay, frontOverlayData);
      }
      if (config.designBack) {
        if (backOverlay) { backOverlay.parentElement.removeChild(backOverlay); backOverlay = null; }
        backOverlay = document.createElement('img');
        backOverlay.className = 'overlay-design image-overlay';
        backOverlayData = { ...config.designBackData };
        backOverlay.style.transform = `translate(${backOverlayData.x}px, ${backOverlayData.y}px) scale(${backOverlayData.scale})`;
        backOverlay.src = config.designBack;
        backView.appendChild(backOverlay);
        makeDraggable(backOverlay, backOverlayData);
      }
      
      // Text-Overlays wiederherstellen
      if (frontTextOverlay) { frontTextOverlay.parentElement.removeChild(frontTextOverlay); frontTextOverlay = null; }
      if (backTextOverlay) { backTextOverlay.parentElement.removeChild(backTextOverlay); backTextOverlay = null; }
      if (config.textFront && config.textFront.trim() !== "") {
          frontTextOverlay = document.createElement('div');
          frontTextOverlay.className = 'overlay-design text-overlay';
          frontTextOverlay.style.fontSize = '24px';
          frontTextOverlay.style.fontWeight = 'bold';
          frontTextOverlay.style.color = config.fontColorFront || frontFontColorInput.value;
          frontTextOverlay.style.background = 'transparent';
          frontTextOverlay.textContent = config.textFront;
          frontTextOverlayData = config.textOverlayDataFront ? { ...config.textOverlayDataFront } : { x: 0, y: 0, scale: 1 };
          frontTextOverlay.style.transform = `translate(${frontTextOverlayData.x}px, ${frontTextOverlayData.y}px) scale(${frontTextOverlayData.scale})`;
          frontView.appendChild(frontTextOverlay);
          makeDraggable(frontTextOverlay, frontTextOverlayData);
      }
      if (config.textBack && config.textBack.trim() !== "") {
          backTextOverlay = document.createElement('div');
          backTextOverlay.className = 'overlay-design text-overlay';
          backTextOverlay.style.fontSize = '24px';
          backTextOverlay.style.fontWeight = 'bold';
          backTextOverlay.style.color = config.fontColorBack || backFontColorInput.value;
          backTextOverlay.style.background = 'transparent';
          backTextOverlay.textContent = config.textBack;
          backTextOverlayData = config.textOverlayDataBack ? { ...config.textOverlayDataBack } : { x: 0, y: 0, scale: 1 };
          backTextOverlay.style.transform = `translate(${backTextOverlayData.x}px, ${backTextOverlayData.y}px) scale(${backTextOverlayData.scale})`;
          backView.appendChild(backTextOverlay);
          makeDraggable(backTextOverlay, backTextOverlayData);
      }
      addConfigBtn.textContent = "√Ñnderungen √ºbernehmen";
      // Im Edit-Modus soll das Anfrageformular mit den konfigurierten Daten erhalten bleiben.
    };

    // Beim Absenden des Formulars: Vorschau erzeugen
    document.getElementById('orderForm').addEventListener('submit', function(e) {
  let preview = "";
  configurationsArray.forEach(function(config, index) {
    preview += "Produkt " + (index + 1) + ":\n";
    preview += "Produktart: " + config.product + "\n";
    preview += "Farbe: " + config.color + "\n";
    preview += "Gr√∂√üen & Anzahl:\n";
    for (const [size, qty] of Object.entries(config.sizeQuantities)) {
      preview += "  " + size + ": " + qty + "\n";
    }
    preview += "Text (Vorderseite): " + (config.textFront || "-") + "\n";
    preview += "Text (R√ºckseite): " + (config.textBack || "-") + "\n";
    preview += "Ansicht: " + config.activeView + "\n\n";
  });

  document.getElementById('konfigurationenVorschau').value = preview;
});

    // Listener f√ºr "Produkt hinzuf√ºgen / √Ñnderungen √ºbernehmen"
    addConfigBtn.addEventListener('click', function(e) {
      e.preventDefault();
       // Neue Logik: Werte aus den <select>-Feldern holen
  let sizeQuantities = {};
  ['S','M','L','XL','2XL','3XL'].forEach(size => {
    const sel = document.getElementById('size_' + size);
    sizeQuantities[size] = sel ? sel.value : '0';
  });
      // Hole ausschlie√ülich die Texte aus den Eingabefeldern
      let configData = {
        product: produktartSelect.value,
        sizeQuantities: sizeQuantities,
        color: colorSelect.value,
        textFront: frontTextInput.value,
        textBack: backTextInput.value,
        fontColorFront: frontFontColorInput.value,
        fontColorBack: backFontColorInput.value,
        activeView: frontView.style.display !== 'none' ? 'Vorderseite' : 'R√ºckseite',
        designFront: frontOverlay ? frontOverlay.src : "",
        designFrontData: frontOverlay ? { x: frontOverlayData.x, y: frontOverlayData.y, scale: frontOverlayData.scale } : null,
        designBack: backOverlay ? backOverlay.src : "",
        designBackData: backOverlay ? { x: backOverlayData.x, y: backOverlayData.y, scale: backOverlayData.scale } : null,
        textOverlayDataFront: frontTextOverlay ? { x: frontTextOverlayData.x, y: frontTextOverlayData.y, scale: frontTextOverlayData.scale } : null,
        textOverlayDataBack: backTextOverlay ? { x: backTextOverlayData.x, y: backTextOverlayData.y, scale: backTextOverlayData.scale } : null
      };
if (editModeIndex !== null) {
  configurationsArray[editModeIndex] = configData;
  editModeIndex = null;
  addConfigBtn.textContent = "Produkt hinzuf√ºgen";
  clearConfigurator();  // Reset nach Editieren
} else {
  configurationsArray.push(configData);
  clearConfigurator();
}
      renderConfigurations();
    });
    
    frontViewBtn.addEventListener('click', function () {
  frontView.style.display = 'block';
  backView.style.display = 'none';
  previewText.textContent = "Vorschau deines Produkts (Vorderseite)";
});

backViewBtn.addEventListener('click', function () {
  frontView.style.display = 'none';
  backView.style.display = 'block';
  previewText.textContent = "Vorschau deines Produkts (R√ºckseite)";
});
    
    // Standardwerte initial setzen
    produktartSelect.value = "T-Shirt";
    produktartSelect.dispatchEvent(new Event('change'));
    colorSelect.value = "Schwarz";
    colorSelect.dispatchEvent(new Event('change'));

    document.addEventListener('click', function() {
      activeOverlay = null;
      activeOverlayData = null;
    });
    function showHintFixedPosition() {
  if (document.querySelector('.hint-popup')) return;

  const configurator = document.getElementById('configurator');

  const hint = document.createElement('div');
  hint.className = 'hint-popup show';
  hint.textContent = 'Klicke und ziehe, um Position & Gr√∂√üe anzupassen';

  // Neue Position:
  hint.style.position = 'relative';
  hint.style.top = '150';
  hint.style.right = '100px';
  hint.style.zIndex = '50';

  configurator.appendChild(hint);

  setTimeout(() => {
    hint.classList.remove('show');
    setTimeout(() => hint.remove(), 500);
  }, 7000);
}
  });
  

</script>

</body>
</html>